Version 4
SHEET 1 1548 680
WIRE 128 -128 -144 -128
WIRE 128 -96 128 -128
WIRE 80 -16 0 -16
WIRE 880 -16 768 -16
WIRE 208 0 128 0
WIRE -448 16 -480 16
WIRE -352 16 -368 16
WIRE -304 16 -352 16
WIRE -144 16 -144 -128
WIRE -144 16 -224 16
WIRE 208 16 208 0
WIRE 416 16 208 16
WIRE 608 16 416 16
WIRE 768 32 768 -16
WIRE 880 32 880 -16
WIRE 208 64 208 16
WIRE -352 96 -352 16
WIRE 416 112 416 96
WIRE 416 112 352 112
WIRE 608 112 608 96
WIRE 608 112 416 112
WIRE -480 128 -480 16
WIRE -192 128 -256 128
WIRE 0 128 0 -16
WIRE 0 128 -112 128
WIRE 768 160 768 112
WIRE 880 160 880 112
WIRE 880 160 768 160
WIRE -256 176 -256 128
WIRE 256 176 144 176
WIRE 352 176 352 112
WIRE 352 176 256 176
WIRE 352 192 352 176
WIRE 512 192 432 192
WIRE 576 192 512 192
WIRE 688 192 576 192
WIRE 432 208 432 192
WIRE 512 208 512 192
WIRE 576 208 576 192
WIRE 0 240 0 128
WIRE 80 240 0 240
WIRE 80 256 80 240
WIRE 96 256 80 256
WIRE -480 272 -480 208
WIRE -480 272 -528 272
WIRE -352 272 -352 160
WIRE -352 272 -480 272
WIRE -256 272 -256 256
WIRE -256 272 -352 272
WIRE -64 272 -64 192
WIRE -64 272 -256 272
WIRE 144 272 -64 272
WIRE 208 272 208 144
WIRE 208 272 144 272
WIRE 432 272 208 272
WIRE 512 272 432 272
WIRE 576 272 512 272
WIRE -528 304 -528 272
FLAG -528 304 0
FLAG 688 192 Vdet
IOPIN 688 192 Out
SYMBOL ind2 592 112 M180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L1
SYMATTR Value 390µ
SYMATTR Type ind
SYMATTR SpiceLine Rser=1.66
SYMBOL ind2 784 128 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L2
SYMATTR Value 390µ
SYMATTR Type ind
SYMBOL res -352 0 R90
WINDOW 0 14 36 VBottom 2
WINDOW 3 36 54 VTop 2
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL res 864 16 R0
SYMATTR InstName R2
SYMATTR Value 1.66
SYMBOL voltage -256 160 R0
SYMATTR InstName V1
SYMATTR Value PULSE(0 12 8u .0 .0 300u)
SYMBOL voltage -480 112 R0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL cap -368 96 R0
WINDOW 0 14 23 Left 2
SYMATTR InstName C1
SYMATTR Value 5600µ
SYMBOL nmos 96 176 R0
WINDOW 0 -6 119 Left 2
WINDOW 3 -20 145 Left 2
SYMATTR InstName M1
SYMATTR Value IRL640_drf
SYMBOL res -96 112 R90
WINDOW 0 -3 47 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10
SYMBOL res 336 208 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R5
SYMATTR Value 680
SYMBOL diode 416 208 R0
WINDOW 0 -22 4 Left 2
WINDOW 3 -29 34 Left 2
SYMATTR InstName D2
SYMATTR Value 1N914
SYMBOL diode 528 272 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -14 30 Left 2
SYMATTR InstName D3
SYMATTR Value 1N914
SYMBOL res -208 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 37 55 VTop 2
SYMATTR InstName R6
SYMATTR Value 0.01
SYMBOL cap 560 208 R0
SYMATTR InstName C2
SYMATTR Value 1p
SYMBOL res 224 160 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 22000
SYMBOL diode 272 240 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -86 8 Left 2
SYMATTR InstName D1
SYMATTR Value RF2001NS2D
SYMBOL nmos 80 -96 R0
SYMATTR InstName M2
SYMATTR Value IRL640_drf
SYMBOL res 400 0 R0
SYMATTR InstName R9
SYMATTR Value 680
TEXT 704 -112 Left 2 !* Target circuit\n* Coupling coeff\nK1 L1 L2 0.9\n* 30 turn 0.5mm 300mm->390uH,1.6ohm
TEXT -472 336 Left 2 !* Sensitive to :\n*    Target circuit and coupling \n*    Choice of MOSFET is significant\n*    Detector capacitance smooths ringing\n.tran 0 1800u 0
TEXT -456 -232 Left 2 ;Metal Detector Pulse Injection
TEXT -640 504 Left 2 !.model IRL640_drf VDMOS(Rg=0.75 Vto=1.5 Rd=160m Rs=0.0m Rb=4m Kp=15.5 Cgdmax=650p Cgdmin=90p Cgs=1200p Cjo=0.2n Is=10u ksubthres=.1 mfg=Fairchild_drf Vds=200 Ron=180m Qg=40n)
TEXT -464 -184 Left 2 ;Similar to https://www.lammertbies.nl/electronics/pi-metal-detector\nw/ IRL640
